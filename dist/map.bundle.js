!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return Math.floor(Math.random()*(t-e)+e)}function i(e,t){return e.x===t.x&&e.y===t.y}n.r(t),n.d(t,"getRandomFromRange",(function(){return o})),n.d(t,"hasColisions",(function(){return i})),n.d(t,"GameControl",(function(){return l}));var l=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null!=e._instance)return e._instance;this.gameMapElement=document.getElementById("gameMap"),this.scoreElement=document.getElementById("score"),this.resetButtonElement=document.getElementById("resetButton"),this.pauseButtonElement=document.getElementById("pauseButton"),this.startButtonElement=document.getElementById("startButton"),this.gameStateMessageElement=document.getElementById("gameStateMessage"),this.gameMapElement.width=e.mapWidthPX,this.gameMapElement.height=e.mapHeightPX;var t=e.getMapSize(),n=t.width,r=t.height;this.gameMap=Array.from({length:n},(function(){return Array(r).fill(0)})),this._score=0,this._state="begin",this.ctx=this.gameMapElement.getContext("2d"),this.drawBackground(),e._instance=this}var t,n,a;return t=e,a=[{key:"getMapSize",value:function(){var t=e.mapWidthPX,n=e.mapHeightPX,r=e.cellSize;return{width:Math.floor(t/r),height:Math.floor(n/r)}}}],(n=[{key:"getObject",value:function(e){var t=e.x,n=e.y;return this.gameMap[t][n]}},{key:"drawBackground",value:function(){this.ctx.fillStyle=e.backgroundColor,this.ctx.fillRect(e.lowestIndex,e.lowestIndex,e.mapWidthPX,e.mapHeightPX)}},{key:"drawCell",value:function(t,n,r){var a=t.x,o=t.y,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=this.ctx,u=this.gameMap,s=e.backgroundColor,c=e.cellSize,d=i?c-1:c;l.fillStyle=n||s,l.fillRect(a*c,o*c,d,d),u[a][o]=r}},{key:"clearCell",value:function(t,n){var r=t.x,a=t.y,o=e.cellSize,i=e.backgroundColor;this.ctx.fillStyle=i,this.ctx.fillRect(r*o,a*o,o,o),this.gameMap[r][a]=n||0}},{key:"getCoordinatesFromRange",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.getMapSize(),a=r.width,i=r.height,l=t.XMin,u=void 0===l?e.lowestIndex:l,s=t.XMax,c=void 0===s?a:s,d=t.YMin,f=void 0===d?e.lowestIndex:d,h=t.YMax,g=void 0===h?i:h,m=o(u,c),p=o(f,g);n&&0!==this.gameMap[m][p];)m=o(u,c),p=o(f,g);return{x:m,y:p}}},{key:"state",get:function(){return this._state},set:function(e){var t;switch(e){case"pause":t="Game was stoped";break;case"play":t="Play";break;case"begin":t="Start game";break;case"gameover":t="You are lose. Your score is ".concat(this.score);break;default:t="Undefined state",console.error("Undefined state: ",this.state)}this.gameStateMessageElement.innerText=t,this._state=e}},{key:"score",get:function(){return this._score},set:function(e){this.scoreElement.innerText=e,this._score=e}}])&&r(t.prototype,n),a&&r(t,a),e}();a(l,"_instance",null),a(l,"cellSize",20),a(l,"lowestIndex",0),a(l,"gameLoopRefreshRate",100),a(l,"backgroundColor","#eeeeee"),a(l,"mapWidthPX",500),a(l,"mapHeightPX",500)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hcENvbnRyb2wuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnZXRSYW5kb21Gcm9tUmFuZ2UiLCJtaW4iLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJoYXNDb2xpc2lvbnMiLCJjb29yZGluYXRlczEiLCJjb29yZGluYXRlczIiLCJ4IiwieSIsIkdhbWVDb250cm9sIiwiX2luc3RhbmNlIiwidGhpcyIsImdhbWVNYXBFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNjb3JlRWxlbWVudCIsInJlc2V0QnV0dG9uRWxlbWVudCIsInBhdXNlQnV0dG9uRWxlbWVudCIsInN0YXJ0QnV0dG9uRWxlbWVudCIsImdhbWVTdGF0ZU1lc3NhZ2VFbGVtZW50Iiwid2lkdGgiLCJtYXBXaWR0aFBYIiwiaGVpZ2h0IiwibWFwSGVpZ2h0UFgiLCJnZXRNYXBTaXplIiwiZ2FtZU1hcCIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsImZpbGwiLCJfc2NvcmUiLCJfc3RhdGUiLCJjdHgiLCJnZXRDb250ZXh0IiwiZHJhd0JhY2tncm91bmQiLCJjZWxsU2l6ZSIsImZpbGxTdHlsZSIsImJhY2tncm91bmRDb2xvciIsImZpbGxSZWN0IiwibG93ZXN0SW5kZXgiLCJjb2xvciIsImNyb3AiLCJmaWxsU2l6ZSIsIm5leHRPYmplY3QiLCJyYW5nZXMiLCJjaGVja0NvbGxpc2lvbnMiLCJYTWluIiwiWE1heCIsIllNaW4iLCJZTWF4IiwibmV4dFN0YXRlIiwibWVzc2FnZSIsInNjb3JlIiwiY29uc29sZSIsImVycm9yIiwic3RhdGUiLCJpbm5lclRleHQiLCJuZXh0U2NvcmUiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gs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QUFVLGFBQ1YsTUFDSixJQUFLLFdBQ0RBLEVBQVUsK0JBQUgsT0FBa0N4QyxLQUFLeUMsT0FDOUMsTUFDSixRQUNJRCxFQUFVLGtCQUNWRSxRQUFRQyxNQUFNLG9CQUFxQjNDLEtBQUs0QyxPQUVoRDVDLEtBQUtRLHdCQUF3QnFDLFVBQVlMLEVBQ3pDeEMsS0FBS29CLE9BQVNtQixJQTNEdEIsNEJBOERRLE9BQU92QyxLQUFLbUIsUUE5RHBCLGFBZ0VjMkIsR0FDTjlDLEtBQUtJLGFBQWF5QyxVQUFZQyxFQUM5QjlDLEtBQUttQixPQUFTMkIsTywyQkFsRXRCLEssRUFBYWhELEUsWUFDVSxNLEVBRFZBLEUsV0FFUyxJLEVBRlRBLEUsY0FHWSxHLEVBSFpBLEUsc0JBSW9CLEssRUFKcEJBLEUsa0JBS2dCLFcsRUFMaEJBLEUsYUFNVyxLLEVBTlhBLEUsY0FPWSIsImZpbGUiOiJtYXAuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbUZyb21SYW5nZShtaW4sIG1heCkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNDb2xpc2lvbnMoY29vcmRpbmF0ZXMxLCBjb29yZGluYXRlczIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBjb29yZGluYXRlczEueCA9PT0gY29vcmRpbmF0ZXMyLnhcbiAgICAgICAgJiYgY29vcmRpbmF0ZXMxLnkgPT09IGNvb3JkaW5hdGVzMi55XG4gICAgKVxufVxuXG4vLyBTaW5nbGV0b24gY2xhc3Mgb2YgZ2FtZSBtYXBcbmV4cG9ydCBjbGFzcyBHYW1lQ29udHJvbCB7XG4gICAgc3RhdGljIF9pbnN0YW5jZSA9IG51bGw7XG4gICAgc3RhdGljIGNlbGxTaXplID0gMjA7IC8vIHNpemUgb2YgY2VsbCBpbiBwaXhlbFxuICAgIHN0YXRpYyBsb3dlc3RJbmRleCA9IDA7XG4gICAgc3RhdGljIGdhbWVMb29wUmVmcmVzaFJhdGUgPSAxMDA7XG4gICAgc3RhdGljIGJhY2tncm91bmRDb2xvciA9ICcjZWVlZWVlJztcbiAgICBzdGF0aWMgbWFwV2lkdGhQWCA9IDUwMDtcbiAgICBzdGF0aWMgbWFwSGVpZ2h0UFggPSA1MDA7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgaWYgKEdhbWVDb250cm9sLl9pbnN0YW5jZSAhPSBudWxsKSByZXR1cm4gR2FtZUNvbnRyb2wuX2luc3RhbmNlO1xuXG4gICAgICAgIHRoaXMuZ2FtZU1hcEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZU1hcCcpO1xuICAgICAgICB0aGlzLnNjb3JlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZScpO1xuICAgICAgICB0aGlzLnJlc2V0QnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNldEJ1dHRvbicpO1xuICAgICAgICB0aGlzLnBhdXNlQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXVzZUJ1dHRvbicpO1xuICAgICAgICB0aGlzLnN0YXJ0QnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydEJ1dHRvbicpO1xuICAgICAgICB0aGlzLmdhbWVTdGF0ZU1lc3NhZ2VFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWVTdGF0ZU1lc3NhZ2UnKTtcblxuICAgICAgICB0aGlzLmdhbWVNYXBFbGVtZW50LndpZHRoID0gR2FtZUNvbnRyb2wubWFwV2lkdGhQWFxuICAgICAgICB0aGlzLmdhbWVNYXBFbGVtZW50LmhlaWdodCA9IEdhbWVDb250cm9sLm1hcEhlaWdodFBYXG5cbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBHYW1lQ29udHJvbC5nZXRNYXBTaXplKClcbiAgICAgICAgdGhpcy5nYW1lTWFwID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogd2lkdGggfSwgKCkgPT4gQXJyYXkoaGVpZ2h0KS5maWxsKDApKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3Njb3JlID0gMDtcbiAgICAgICAgLy8gc3RhdGVzOiBwYXVzZXxwbGF5fGJlZ2lufGdhbWVvdmVyXG4gICAgICAgIHRoaXMuX3N0YXRlID0gJ2JlZ2luJztcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY3R4ID0gdGhpcy5nYW1lTWFwRWxlbWVudC5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgICAgIC8vIGZpbGwgZ2FtZSBtYXBcbiAgICAgICAgdGhpcy5kcmF3QmFja2dyb3VuZCgpO1xuXG4gICAgICAgIEdhbWVDb250cm9sLl9pbnN0YW5jZSA9IHRoaXM7XG4gICAgfTtcbiAgICBnZXQgc3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdGF0ZTtcbiAgICB9XG4gICAgc2V0IHN0YXRlKG5leHRTdGF0ZSkge1xuICAgICAgICBsZXQgbWVzc2FnZTtcbiAgICAgICAgc3dpdGNoIChuZXh0U3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3BhdXNlJzpcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gJ0dhbWUgd2FzIHN0b3BlZCc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdwbGF5JzpcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gJ1BsYXknO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYmVnaW4nOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnU3RhcnQgZ2FtZSc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdnYW1lb3Zlcic6XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBZb3UgYXJlIGxvc2UuIFlvdXIgc2NvcmUgaXMgJHt0aGlzLnNjb3JlfWA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnVW5kZWZpbmVkIHN0YXRlJztcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmRlZmluZWQgc3RhdGU6ICcsIHRoaXMuc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlTWVzc2FnZUVsZW1lbnQuaW5uZXJUZXh0ID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSBuZXh0U3RhdGU7XG4gICAgfVxuICAgIGdldCBzY29yZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Njb3JlO1xuICAgIH1cbiAgICBzZXQgc2NvcmUobmV4dFNjb3JlKSB7XG4gICAgICAgIHRoaXMuc2NvcmVFbGVtZW50LmlubmVyVGV4dCA9IG5leHRTY29yZTtcbiAgICAgICAgdGhpcy5fc2NvcmUgPSBuZXh0U2NvcmU7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldE1hcFNpemUoKSB7XG4gICAgICAgIGNvbnN0IHsgbWFwV2lkdGhQWCwgbWFwSGVpZ2h0UFgsIGNlbGxTaXplIH0gPSBHYW1lQ29udHJvbFxuICAgICAgICByZXR1cm4geyB3aWR0aDogTWF0aC5mbG9vcihtYXBXaWR0aFBYIC8gY2VsbFNpemUpLCBoZWlnaHQ6IE1hdGguZmxvb3IobWFwSGVpZ2h0UFggLyBjZWxsU2l6ZSkgfVxuICAgIH1cbiAgICBnZXRPYmplY3QoeyB4LCB5IH0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2FtZU1hcFt4XVt5XTtcbiAgICB9O1xuICAgIGRyYXdCYWNrZ3JvdW5kKCkge1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBHYW1lQ29udHJvbC5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KEdhbWVDb250cm9sLmxvd2VzdEluZGV4LCBHYW1lQ29udHJvbC5sb3dlc3RJbmRleCwgR2FtZUNvbnRyb2wubWFwV2lkdGhQWCwgR2FtZUNvbnRyb2wubWFwSGVpZ2h0UFgpO1xuICAgIH1cbiAgICBkcmF3Q2VsbCh7IHgsIHkgfSwgY29sb3IsIG9iamVjdCwgY3JvcCA9IHRydWUpIHtcbiAgICAgICAgY29uc3QgeyBjdHgsIGdhbWVNYXAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHsgYmFja2dyb3VuZENvbG9yLCBjZWxsU2l6ZSB9ID0gR2FtZUNvbnRyb2xcbiAgICAgICAgY29uc3QgZmlsbFNpemUgPSBjcm9wID8gY2VsbFNpemUgLSAxIDogY2VsbFNpemVcblxuICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3IgfHwgYmFja2dyb3VuZENvbG9yO1xuICAgICAgICBjdHguZmlsbFJlY3QoeCAqIGNlbGxTaXplLCB5ICogY2VsbFNpemUsIGZpbGxTaXplLCAgZmlsbFNpemUpXG4gICAgICAgIGdhbWVNYXBbeF1beV0gPSBvYmplY3RcbiAgICB9XG4gICAgY2xlYXJDZWxsKHsgeCwgeSB9LCBuZXh0T2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IHsgY2VsbFNpemUsIGJhY2tncm91bmRDb2xvciB9ID0gR2FtZUNvbnRyb2xcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gYmFja2dyb3VuZENvbG9yXG4gICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KHggKiBjZWxsU2l6ZSwgeSAqIGNlbGxTaXplLCBjZWxsU2l6ZSwgY2VsbFNpemUpXG4gICAgICAgIHRoaXMuZ2FtZU1hcFt4XVt5XSA9IG5leHRPYmplY3QgfHwgMFxuICAgIH1cblxuXG4gICAgZ2V0Q29vcmRpbmF0ZXNGcm9tUmFuZ2UocmFuZ2VzID0ge30sIGNoZWNrQ29sbGlzaW9ucyA9IHRydWUpIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBHYW1lQ29udHJvbC5nZXRNYXBTaXplKClcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgWE1pbiA9IEdhbWVDb250cm9sLmxvd2VzdEluZGV4LFxuICAgICAgICAgICAgWE1heCA9IHdpZHRoLFxuICAgICAgICAgICAgWU1pbiA9IEdhbWVDb250cm9sLmxvd2VzdEluZGV4LFxuICAgICAgICAgICAgWU1heCA9IGhlaWdodCxcbiAgICAgICAgfSA9IHJhbmdlcztcbiAgICAgICAgbGV0IHggPSBnZXRSYW5kb21Gcm9tUmFuZ2UoWE1pbiwgWE1heCksXG4gICAgICAgICAgICB5ID0gZ2V0UmFuZG9tRnJvbVJhbmdlKFlNaW4sIFlNYXgpO1xuXG4gICAgICAgIHdoaWxlIChjaGVja0NvbGxpc2lvbnMgJiYgdGhpcy5nYW1lTWFwW3hdW3ldICE9PSAwKSB7XG4gICAgICAgICAgICB4ID0gZ2V0UmFuZG9tRnJvbVJhbmdlKFhNaW4sIFhNYXgpO1xuICAgICAgICAgICAgeSA9IGdldFJhbmRvbUZyb21SYW5nZShZTWluLCBZTWF4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IHgsIHkgfVxuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=